#!/bin/bash

# You should only need to run this once.
# However, you can run multiple times,
# it should not change anything after the first run.

# ----- remove fork files used by spf13-vim
vimrc_forc_files=(
  '.vimrc.before.fork'
  '.vimrc.bundles.fork'
  '.vimrc.fork'
)
for file in "${vimrc_forc_files[@]}"; do
  if [ -e "$HOME/${file}" ]; then
    rm -i "$HOME/${file}"
  fi
done


# ----- rewrite vimrc files
vimrc_files=('.vimrc.before.local' '.vimrc.bundles.local' '.vimrc.local')
for file in "${vimrc_files[@]}"; do
  # remove it if it is a symbolic link
  if [ -h "$HOME/${file}" ] ; then rm -i "$HOME/${file}"; fi
  echo "exe 'source' \"$PWD/${file}\"" > "$HOME/${file}"
done

# ----- rewrite .zshrc file
if [ -h "$HOME/.zshrc" ] ; then rm -i "$HOME/.zshrc"; fi
echo "source $PWD/.zshrc" > "$HOME/.zshrc"

# ----- rewrite .tmux.conf file
if [ -h "$HOME/.tmux.conf" ] ; then rm -i "$HOME/.tmux.conf"; fi
echo "run-shell 'tmux source-file $PWD/.tmux.conf'" > "$HOME/.tmux.conf"
